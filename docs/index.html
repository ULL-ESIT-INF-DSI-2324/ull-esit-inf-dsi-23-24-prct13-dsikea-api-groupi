<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</title><meta name="description" content="Documentation for ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-13---dsikea-api-rest-con-nodeexpress" class="tsd-anchor"></a><h1><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress">Práctica 13 - DSIkea: API REST con Node/Express</a></h1><p>Alumnas:</p>
<ul>
<li>Inés Garrote Fontenla <a href="mailto:alu0101512297@ull.edu.es">alu0101512297@ull.edu.es</a></li>
<li>Godgith John <a href="mailto:alu0101463858@ull.edu.es">alu0101463858@ull.edu.es</a></li>
<li>Ángela Zhouling Izquierdo Padrón <a href="mailto:alu0101480442@ull.edu.es">alu0101480442@ull.edu.es</a></li>
</ul>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/actions/workflows/node.js.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/actions/workflows/node.js.yml/badge.svg" alt="Tests"></a></p>
<p><a href="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/actions/workflows/sonarcloud.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/actions/workflows/sonarcloud.yml/badge.svg" alt="Sonar-Cloud"></a></p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/badge.svg?branch=main" alt="Coverage Status"></a></p>
<p>APLICACION ACCESIBLE A RENDER
<a href="https://ull-esit-inf-dsi-23-24-prct13-dsikea-api-m8wa.onrender.com">https://ull-esit-inf-dsi-23-24-prct13-dsikea-api-m8wa.onrender.com</a></p>
<a id="md:informe" class="tsd-anchor"></a><h1><a href="#md:informe">Informe</a></h1><a id="md:introducción" class="tsd-anchor"></a><h3><a href="#md:introducción">Introducción</a></h3><p>En esta práctica grupal hay que aplicar todo lo aprendido relacionado con typescript y el entorno de ejecución <code>Node.js</code>.</p>
<a id="md:objetivos-a-lograr-realizando-esta-práctica" class="tsd-anchor"></a><h3><a href="#md:objetivos-a-lograr-realizando-esta-práctica">Objetivos a lograr realizando esta práctica</a></h3><p>Aprender acerca de la base de datos de basado en colecciones, en el que se usará <code>Mongoose</code>, que és una biblioteca de moedelado de objetos de <code>MongoDB</code> para <code>Node.js</code>. En el que se usa <strong>Esquemas</strong>(Mecanismo que da forma a un documento) y <strong>Modelos</strong>(Permite instanciar objetos de los esquemas)
Para interactuar con la base de datos, se usará las operaciones <strong>CRUD</strong>(Creat-Read-Update-Delete).</p>
<p>Primero se debe descargar el <strong>MongoDB</strong>:</p>
<ul>
<li>Primero se descarga la versión <a href="https://www.mongodb.com/try/download/community">Community Server</a>(que es un archico <code>tgz</code>)</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$wget</span><span class="hl-0"> </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-7.0.8.tgz</span><br/><span class="hl-0">--</span><span class="hl-4">2024</span><span class="hl-0">-</span><span class="hl-4">04</span><span class="hl-0">-</span><span class="hl-4">09</span><span class="hl-0"> </span><span class="hl-4">09</span><span class="hl-0">:</span><span class="hl-4">55</span><span class="hl-0">:</span><span class="hl-4">26</span><span class="hl-0">--  </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-7.0.8.tgz</span><br/><span class="hl-1">Resolving</span><span class="hl-0"> </span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">org</span><span class="hl-0"> (</span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">org</span><span class="hl-0">)... </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.58</span><span class="hl-0">, </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.54</span><span class="hl-0">, </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.61</span><span class="hl-0">, ...</span><br/><span class="hl-1">Connecting</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">org</span><span class="hl-0"> (</span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">org</span><span class="hl-0">)|</span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.58</span><span class="hl-0">|:</span><span class="hl-4">443.</span><span class="hl-0">.. </span><span class="hl-1">connected</span><span class="hl-0">.</span><br/><span class="hl-6">HTTP</span><span class="hl-0"> </span><span class="hl-1">request</span><span class="hl-0"> </span><span class="hl-1">sent</span><span class="hl-0">, </span><span class="hl-1">awaiting</span><span class="hl-0"> </span><span class="hl-1">response</span><span class="hl-0">... </span><span class="hl-4">200</span><span class="hl-0"> </span><span class="hl-6">OK</span><br/><span class="hl-2">Length</span><span class="hl-0">: </span><span class="hl-4">85283830</span><span class="hl-0"> (81</span><span class="hl-6">M</span><span class="hl-0">) [</span><span class="hl-1">application</span><span class="hl-0">/</span><span class="hl-1">gzip</span><span class="hl-0">]</span><br/><span class="hl-1">Saving</span><span class="hl-0"> </span><span class="hl-2">to</span><span class="hl-0">: ‘</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">linux</span><span class="hl-0">-</span><span class="hl-1">x86_64</span><span class="hl-0">-</span><span class="hl-1">ubuntu2204</span><span class="hl-0">-</span><span class="hl-4">7.0</span><span class="hl-0">.8.</span><span class="hl-1">tgz</span><span class="hl-0">’</span>
</code><button>Copy</button></pre>
<ul>
<li>Ahora se descomprime</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$tar</span><span class="hl-0"> </span><span class="hl-1">xzvf</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">linux</span><span class="hl-0">-</span><span class="hl-1">x86_64</span><span class="hl-0">-</span><span class="hl-1">ubuntu2204</span><span class="hl-0">-</span><span class="hl-4">7.0</span><span class="hl-0">.8.</span><span class="hl-1">tgz</span>
</code><button>Copy</button></pre>
<ul>
<li>Se crea un un nuevo directorio <code>mongodb-data</code>que MongoDB usará para almacenar todo lo necesario al ejecutar el servidor, incluyendo la información que almacenamos en nuestras bases de datos</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$pwd</span><br/><span class="hl-0">/</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><br/><span class="hl-0">[~()]</span><span class="hl-1">$mkdir</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">data</span>
</code><button>Copy</button></pre>
<ul>
<li>Ahora se arranca el servidor</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$sudo</span><span class="hl-0"> /</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><span class="hl-0">/</span><span class="hl-1">mongodb</span><span class="hl-0">/</span><span class="hl-1">bin</span><span class="hl-0">/</span><span class="hl-1">mongod</span><span class="hl-0"> --</span><span class="hl-1">dbpath</span><span class="hl-0"> /</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><span class="hl-0">/</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">data</span><span class="hl-0">/</span>
</code><button>Copy</button></pre>
<ul>
<li>Para comprobar que el servidor funciona bien, se puede descargar <a href="https://www.mongodb.com/try/download/shell"> MongoDB Shell</a></li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$wget</span><span class="hl-0"> </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//downloads.mongodb.com/compass/mongodb-mongosh_2.2.3_amd64.deb</span><br/><span class="hl-0">--</span><span class="hl-4">2024</span><span class="hl-0">-</span><span class="hl-4">04</span><span class="hl-0">-</span><span class="hl-4">09</span><span class="hl-0"> </span><span class="hl-4">09</span><span class="hl-0">:</span><span class="hl-4">58</span><span class="hl-0">:</span><span class="hl-4">43</span><span class="hl-0">--  </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//downloads.mongodb.com/compass/mongodb-mongosh_2.2.3_amd64.deb</span><br/><span class="hl-1">Resolving</span><span class="hl-0"> </span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">com</span><span class="hl-0"> (</span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">com</span><span class="hl-0">)... </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.70</span><span class="hl-0">, </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.11</span><span class="hl-0">, </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.46</span><span class="hl-0">, ...</span><br/><span class="hl-1">Connecting</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">com</span><span class="hl-0"> (</span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">com</span><span class="hl-0">)|</span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.70</span><span class="hl-0">|:</span><span class="hl-4">443.</span><span class="hl-0">.. </span><span class="hl-1">connected</span><span class="hl-0">.</span><br/><span class="hl-6">HTTP</span><span class="hl-0"> </span><span class="hl-1">request</span><span class="hl-0"> </span><span class="hl-1">sent</span><span class="hl-0">, </span><span class="hl-1">awaiting</span><span class="hl-0"> </span><span class="hl-1">response</span><span class="hl-0">... </span><span class="hl-4">200</span><span class="hl-0"> </span><span class="hl-6">OK</span><br/><span class="hl-2">Length</span><span class="hl-0">: </span><span class="hl-4">52976792</span><span class="hl-0"> (51</span><span class="hl-6">M</span><span class="hl-0">) [</span><span class="hl-1">application</span><span class="hl-0">/</span><span class="hl-1">octet</span><span class="hl-0">-</span><span class="hl-1">stream</span><span class="hl-0">]</span><br/><span class="hl-1">Saving</span><span class="hl-0"> </span><span class="hl-2">to</span><span class="hl-0">: ‘</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><span class="hl-0">’</span>
</code><button>Copy</button></pre>
<ul>
<li>Mientras se ejecuta esto en una terminal, abrimos otra terminal y lo descargamos</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$sudo</span><span class="hl-0"> </span><span class="hl-1">dpkg</span><span class="hl-0"> -</span><span class="hl-1">i</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><br/><span class="hl-0">[</span><span class="hl-1">sudo</span><span class="hl-0">] </span><span class="hl-1">password</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-2">usuario</span><span class="hl-0">:</span><br/><span class="hl-1">Seleccionando</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">paquete</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh</span><span class="hl-0"> </span><span class="hl-1">previamente</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">seleccionado</span><span class="hl-0">.</span><br/><span class="hl-0">(</span><span class="hl-1">Leyendo</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">base</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">datos</span><span class="hl-0"> ... </span><span class="hl-4">110121</span><span class="hl-0"> </span><span class="hl-1">ficheros</span><span class="hl-0"> </span><span class="hl-1">o</span><span class="hl-0"> </span><span class="hl-1">directorios</span><span class="hl-0"> </span><span class="hl-1">instalados</span><span class="hl-0"> </span><span class="hl-1">actualmente</span><span class="hl-0">.)</span><br/><span class="hl-1">Preparando</span><span class="hl-0"> </span><span class="hl-1">para</span><span class="hl-0"> </span><span class="hl-1">desempaquetar</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><span class="hl-0"> ...</span><br/><span class="hl-1">Desempaquetando</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-5">mongosh</span><span class="hl-0"> (</span><span class="hl-4">2.2</span><span class="hl-0">.</span><span class="hl-4">3</span><span class="hl-0">) ...</span><br/><span class="hl-1">Configurando</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-5">mongosh</span><span class="hl-0"> (</span><span class="hl-4">2.2</span><span class="hl-0">.</span><span class="hl-4">3</span><span class="hl-0">) ...</span><br/><span class="hl-1">Procesando</span><span class="hl-0"> </span><span class="hl-1">disparadores</span><span class="hl-0"> </span><span class="hl-1">para</span><span class="hl-0"> </span><span class="hl-1">man</span><span class="hl-0">-</span><span class="hl-5">db</span><span class="hl-0"> (</span><span class="hl-4">2.10</span><span class="hl-0">.</span><span class="hl-4">2</span><span class="hl-0">-</span><span class="hl-4">1</span><span class="hl-0">) ...</span>
</code><button>Copy</button></pre>
<ul>
<li>Por último para ejecutar el servidor se usa el comando</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$</span><span class="hl-0"> </span><span class="hl-1">node</span><span class="hl-0">/</span><span class="hl-1">dist</span><span class="hl-0">/</span><span class="hl-1">server</span><span class="hl-0">.</span><span class="hl-1">js</span>
</code><button>Copy</button></pre>
<a id="md:ejercicios-y-su-explicación" class="tsd-anchor"></a><h3><a href="#md:ejercicios-y-su-explicación">Ejercicios y su explicación</a></h3><p>Hay que implementar un API REST, usando Node/Express, a través de varias operaciones(CRUD) para gestionar una tienda de muebles</p>
<a id="md:descripción-de-los-requisitos-del-api" class="tsd-anchor"></a><h3><a href="#md:descripción-de-los-requisitos-del-api">Descripción de los requisitos del API</a></h3><a id="md:servidor" class="tsd-anchor"></a><h2><a href="#md:servidor">Servidor</a></h2><p>Primero se debe conectar el servidor de la base de datos que se ejecuta en nuestra máquina:</p>
<pre><code class="language-ts"><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">connect</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;mongoose&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">connect</span><span class="hl-0">(</span><span class="hl-8">&#39;mongodb://127.0.0.1:27017/dsikea-api-rest&#39;</span><span class="hl-0">)</span><br/><span class="hl-0">  .</span><span class="hl-5">then</span><span class="hl-0">(() </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-8">&#39;Connection to MongoDB server established&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">  .</span><span class="hl-5">catch</span><span class="hl-0">(() </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-8">&#39;Unable to connect to MongoDB server&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<p>En el se usa el método <code>connect</code>, que devuelve una promesa. Usamos el parámetro <code>dbURL</code>, en donde se pone la conexión al servidor <code>MongoDB</code>. Si la conexión se establece bien, pues muestra un mensaje de <code>&#39;Connection to MongoDB server established&#39;</code> y sino pues un mensaje <code>&#39;Unable to connect to MongoDB server&#39;</code></p>
<a id="md:clientes" class="tsd-anchor"></a><h2><a href="#md:clientes">Clientes</a></h2><p>Primer definimos el esquema de los clientes, que lo guardamos en nuestro directorio <code>models</code>.</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">interface</span><span class="hl-0"> </span><span class="hl-10">ClienteInterface</span><span class="hl-0"> </span><span class="hl-9">extends</span><span class="hl-0"> </span><span class="hl-10">Document</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">dni</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">nombre</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">correo</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">contacto</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
<p>Creamos una interfaz que hereda de <code>Document</code>, así definimos la forma de una <strong>nota</strong>(es la colección que se le pasa a MongoDB), en el nuestro cliente tendrá esos atributos.</p>
<p>Ahora definimos las propiedades que tendrá nuestro esquema:</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">ClienteSchema</span><span class="hl-0">: </span><span class="hl-10">Schema</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Schema</span><span class="hl-0">&lt;</span><span class="hl-10">ClienteInterface</span><span class="hl-0">&gt;({</span><br/><span class="hl-0">  </span><span class="hl-1">dni:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">unique:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> !== </span><span class="hl-4">9</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente debe tener 9 caracteres.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-11">\d</span><span class="hl-13">{8}</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">.</span><span class="hl-5">test</span><span class="hl-0">(</span><span class="hl-1">value</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente debe tener un formato válido: [8 dígitos][1 letra mayúscula].&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">nombre:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del cliente debe comenzar con mayúscula.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">correo:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9._%+-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-11">@</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9.-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-15">\.</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z</span><span class="hl-14">]</span><span class="hl-13">{2,}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del cliente debe tener un formato válido.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">contacto:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El número de contacto del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-11">\d</span><span class="hl-13">{9}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El número de contacto del cliente debe tener un formato válido: [9 dígitos].&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p>En el especificamos las validaciones:</p>
<ul>
<li>El <code>type</code> será <code>String</code></li>
<li>Usamos <code>validate</code> para comprobar si el esquema esta bien definido o no, en caso de que la propiedad no este puesto en el formato que pusimos, lanzará un un mensaje de error o sino cumple con la longitud correspondiente, etc.<br>Por último exportamos el esquema</li>
</ul>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">Cliente</span><span class="hl-0"> = </span><span class="hl-5">model</span><span class="hl-0">&lt;</span><span class="hl-10">ClienteInterface</span><span class="hl-0">&gt;(</span><span class="hl-8">&#39;Cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">ClienteSchema</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<a id="md:creación-de-notas" class="tsd-anchor"></a><h3><a href="#md:creación-de-notas">Creación de notas</a></h3><p>Creamos los manejadores que usaremos en la base datos, que lo creamos en otro directorio <code>src/routers</code>
Primero gestionamos las rutas, que se usará para manejar las solicitudes HTTP y después configuramos las solicitudes entrantes con datos en formato <strong>JSON</strong>:</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">customerRouter</span><span class="hl-0"> = </span><span class="hl-1">express</span><span class="hl-0">.</span><span class="hl-5">Router</span><span class="hl-0">();</span><br/><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">express</span><span class="hl-0">.</span><span class="hl-5">json</span><span class="hl-0">());</span>
</code><button>Copy</button></pre>
<p>Ahora empezamos a crear los distintos manejadores:</p>
<ol>
<li><p>Crear un nuevo cliente <code>POST /customers_models</code>:</p>
<ul>
<li>Este manejador recibe una solicitud <strong>POST</strong> en la ruta <code>/customers_models</code>.</li>
<li>Primero busca si ya existe un cliente con el mismo DNI en la base de datos.</li>
<li>Si encuentra un cliente duplicado, devuelve un mensaje de error.</li>
<li>Si no hay un cliente duplicado, crea un nuevo cliente con los datos proporcionados en el cuerpo de la solicitud.</li>
<li>Guarda el cliente en la base de datos y devuelve un mensaje de éxito junto con el cliente creado en caso de éxito, o un mensaje de error en caso de fallo</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">post</span><span class="hl-0">(</span><span class="hl-8">&#39;/customers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">duplicatedCliente</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Cliente</span><span class="hl-0">.</span><span class="hl-5">findOne</span><span class="hl-0">({ </span><span class="hl-1">dni:</span><span class="hl-0"> </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">.</span><span class="hl-1">dni</span><span class="hl-0"> });</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">duplicatedCliente</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ya existe un cliente con ese dni&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">cliente</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Cliente</span><span class="hl-0">(</span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0">.</span><span class="hl-5">save</span><span class="hl-0">();</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">201</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;El cliente se ha creado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">Cliente:</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> });</span><br/><span class="hl-0">} </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">(</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
</li>
</ol>
<p>});</p>
<pre><code><br/><span class="hl-4">2.</span><span class="hl-0"> </span><span class="hl-1">Buscar</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">por</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-8">`GET /customers`</span><span class="hl-0">:</span><br/><br/><br/><span class="hl-0">    - </span><span class="hl-1">Este</span><span class="hl-0"> </span><span class="hl-1">manejador</span><span class="hl-0"> </span><span class="hl-1">recibe</span><span class="hl-0"> </span><span class="hl-1">una</span><span class="hl-0"> </span><span class="hl-1">solicitud</span><span class="hl-0"> </span><span class="hl-6">GET</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">ruta</span><span class="hl-0"> /</span><span class="hl-1">customers</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Busca</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">base</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">datos</span><span class="hl-0"> </span><span class="hl-1">basándose</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-1">proporcionado</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">consulta</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">proporciona</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">encuentra</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">con</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-1">proporcionado</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">encontrado</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">encuentra</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">éxito</span><span class="hl-0"> </span><span class="hl-1">junto</span><span class="hl-0"> </span><span class="hl-1">con</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">encontrado</span><span class="hl-0">.</span><br/><span class="hl-0">    </span><span class="hl-8">```ts</span><br/><span class="hl-8">    customerRouter.get(&#39;/customers&#39;, async (req, res) =&gt; {</span><br/><span class="hl-8">    try {</span><br/><span class="hl-8">      const dni = req.query.dni;</span><br/><span class="hl-8">      if (!dni) {</span><br/><span class="hl-8">        return res.status(400).send({ msg: &#39;No se proporcionó un dni&#39; });</span><br/><span class="hl-8">      }</span><br/><span class="hl-8">      const clienteEncontrado: ClienteInterface | null = await Cliente.findOne({ dni: dni });</span><br/><span class="hl-8">      if (!clienteEncontrado) {</span><br/><span class="hl-8">        return res.status(404).send({ msg: &#39;El cliente no fue encontrado en la base de datos&#39; });</span><br/><span class="hl-8">      }</span><br/><span class="hl-8">      return res.status(200).send({ msg: &#39;El cliente fue encontrado con éxito&#39;, Cliente: clienteEncontrado });</span><br/><span class="hl-8">    } catch (error) {</span><br/><span class="hl-8">      return res.status(500).send({ msg: &#39;Error al buscar el cliente&#39;, error: error });</span><br/><span class="hl-8">    }</span><br/><br/><span class="hl-8">});</span>
</code><button>Copy</button></pre>
<ol start="3">
<li><p>Buscar un cliente por su identificador único <code>GET /customers/:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud GET en la ruta /customers/:id, donde :id es el identificador único del cliente.</li>
<li>Busca un cliente en la base de datos basándose en su identificador único.</li>
<li>Si no se encuentra un cliente con el ID proporcionado, devuelve un mensaje de cliente no encontrado.</li>
<li>Si se encuentra un cliente, devuelve un mensaje de éxito junto con el cliente encontrado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">get</span><span class="hl-0">(</span><span class="hl-8">&#39;/customers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">cliente</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Cliente</span><span class="hl-0">.</span><span class="hl-5">findById</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">cliente</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;cliente no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;cliente encontrado por id con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">cliente:</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al buscar el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Actualizar un cliente por su identificador único <code>PATCH /customers/:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud PATCH en la ruta /customers/:id, donde :id es el identificador único del cliente que se desea actualizar.</li>
<li>Actualiza el cliente en la base de datos con los datos proporcionados en el cuerpo de la solicitud.</li>
<li>Si no se encuentra un cliente con el ID proporcionado, devuelve un mensaje de cliente no encontrado.</li>
<li>Si se actualiza correctamente el cliente, devuelve un mensaje de éxito junto con el cliente actualizado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/customers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">updatedCliente</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Cliente</span><span class="hl-0">.</span><span class="hl-5">findByIdAndUpdate</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">updatedCliente</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;cliente no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Se ha actualizado correctamente el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">Cliente:</span><span class="hl-0"> </span><span class="hl-1">updatedCliente</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al actualizar el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Actualizar un cliente por DNI <code>PATCH /customers</code>:</p>
<ul>
<li>Este manejador recibe una solicitud PATCH en la ruta /customers.</li>
<li>Actualiza el cliente en la base de datos con los datos proporcionados en el cuerpo de la solicitud, basándose en el DNI proporcionado en la consulta.</li>
<li>Si no se proporciona un DNI, devuelve un mensaje de error.</li>
<li>Si no se encuentra un cliente con el DNI proporcionado, devuelve un mensaje de cliente no encontrado.</li>
<li>Si se actualiza correctamente el cliente, devuelve un mensaje de éxito junto con el cliente actualizado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/customers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">dni</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">dni</span><span class="hl-0">;</span><br/><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">dni</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un dni&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">}</span><br/><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">updatedCliente</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Cliente</span><span class="hl-0">.</span><span class="hl-5">findOneAndUpdate</span><span class="hl-0">({ </span><span class="hl-1">dni:</span><span class="hl-0"> </span><span class="hl-1">dni</span><span class="hl-0"> }, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">updatedCliente</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;cliente no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Se ha actualizado correctamente el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">Cliente:</span><span class="hl-0"> </span><span class="hl-1">updatedCliente</span><span class="hl-0"> });</span><br/><span class="hl-0">} </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al actualizar el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
</li>
</ol>
<p>});</p>
<pre><code><br/><span class="hl-4">6.</span><span class="hl-0"> </span><span class="hl-1">Eliminar</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">por</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-8">`DELETE /customers`</span><span class="hl-0">:</span><br/><br/><br/><span class="hl-0">    - </span><span class="hl-1">Este</span><span class="hl-0"> </span><span class="hl-1">manejador</span><span class="hl-0"> </span><span class="hl-1">recibe</span><span class="hl-0"> </span><span class="hl-1">una</span><span class="hl-0"> </span><span class="hl-1">solicitud</span><span class="hl-0"> </span><span class="hl-6">DELETE</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">ruta</span><span class="hl-0"> /</span><span class="hl-1">customers</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Elimina</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">base</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">datos</span><span class="hl-0"> </span><span class="hl-1">basándose</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-1">proporcionado</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">consulta</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">proporciona</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">encuentra</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">con</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-6">DNI</span><span class="hl-0"> </span><span class="hl-1">proporcionado</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">encontrado</span><span class="hl-0">.</span><br/><span class="hl-0">    - </span><span class="hl-1">Si</span><span class="hl-0"> </span><span class="hl-1">se</span><span class="hl-0"> </span><span class="hl-1">elimina</span><span class="hl-0"> </span><span class="hl-1">correctamente</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0">, </span><span class="hl-1">devuelve</span><span class="hl-0"> </span><span class="hl-1">un</span><span class="hl-0"> </span><span class="hl-1">mensaje</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">éxito</span><span class="hl-0"> </span><span class="hl-1">junto</span><span class="hl-0"> </span><span class="hl-1">con</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">eliminado</span><span class="hl-0">.</span><br/><span class="hl-0">    </span><span class="hl-8">```ts</span><br/><span class="hl-8">    customerRouter.delete(&#39;/customers&#39;, async (req, res) =&gt; {</span><br/><span class="hl-8">    const dni = req.query.dni;</span><br/><span class="hl-8">    if (!dni) {</span><br/><span class="hl-8">      return res.status(400).send({ msg: &#39;No se proporcionó un dni&#39; });</span><br/><span class="hl-8">    }</span><br/><span class="hl-8">    try {</span><br/><span class="hl-8">      const deletedCliente = await Cliente.findOneAndDelete({ dni: dni });</span><br/><span class="hl-8">      if (!deletedCliente) {</span><br/><span class="hl-8">        return res.status(404).send({ msg: &#39;cliente no encontrado&#39; });</span><br/><span class="hl-8">      }</span><br/><span class="hl-8">      return res.status(200).send({ msg: `</span><span class="hl-1">cliente</span><span class="hl-0"> </span><span class="hl-1">$</span><span class="hl-0">{</span><span class="hl-1">deletedCliente</span><span class="hl-0">.</span><span class="hl-1">nombre</span><span class="hl-0">} </span><span class="hl-1">eliminado</span><span class="hl-0"> </span><span class="hl-1">con</span><span class="hl-0"> </span><span class="hl-5">éxito</span><span class="hl-8">`, Cliente: deletedCliente });</span><br/><span class="hl-8">    } catch (error) {</span><br/><span class="hl-8">      return res.status(500).send({ msg: &#39;Error al eliminar el cliente&#39;, error });</span><br/><span class="hl-8">    }</span><br/><br/><span class="hl-8">});</span>
</code><button>Copy</button></pre>
<ol start="7">
<li><p>Eliminar un cliente por su identificador único <code>DELETE /customers:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud DELETE en la ruta /customers/:id, donde :id es el identificador único del cliente que se desea eliminar.</li>
<li>Elimina el cliente de la base de datos basándose en su identificador único.</li>
<li>Si no se encuentra un cliente con el ID proporcionado, devuelve un mensaje de cliente no encontrado.</li>
<li>Si se elimina correctamente el cliente, devuelve un mensaje de éxito junto con el cliente eliminado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">delete</span><span class="hl-0">(</span><span class="hl-8">&#39;/customers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">deletedCliente</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Cliente</span><span class="hl-0">.</span><span class="hl-5">findByIdAndDelete</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">deletedCliente</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;cliente no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Cliente eliminado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">cliente:</span><span class="hl-0"> </span><span class="hl-1">deletedCliente</span><span class="hl-0"> });</span><br/><span class="hl-0">} </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">  </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al eliminar el cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
</li>
</ol>
<p>});</p>
<pre><code><br/><span class="hl-0">## </span><span class="hl-1">Proveedores</span><br/><br/><span class="hl-1">Primer</span><span class="hl-0"> </span><span class="hl-1">definimos</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">esquema</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">los</span><span class="hl-0"> </span><span class="hl-1">clientes</span><span class="hl-0">, </span><span class="hl-1">que</span><span class="hl-0"> </span><span class="hl-1">lo</span><span class="hl-0"> </span><span class="hl-1">guardamos</span><span class="hl-0"> </span><span class="hl-1">en</span><span class="hl-0"> </span><span class="hl-1">nuestro</span><span class="hl-0"> </span><span class="hl-1">directorio</span><span class="hl-0"> </span><span class="hl-8">`providers_models`</span><span class="hl-0">.</span><br/><br/><span class="hl-8">```ts</span><br/><span class="hl-8">export interface ProviderInterface extends Document {</span><br/><span class="hl-8">  cif: string;</span><br/><span class="hl-8">  nombre: string;</span><br/><span class="hl-8">  correo: string;</span><br/><span class="hl-8">  direccion: string;</span><br/><span class="hl-8">}</span>
</code><button>Copy</button></pre>
<p>Creamos una interfaz que hereda de <code>Document</code>, así definimos la forma de una <strong>nota</strong>(es la colección que se le pasa a MongoDB), en el nuestro cliente tendrá esos atributos.</p>
<p>Ahora definimos las propiedades que tendrá nuestro esquema:</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">ProviderSchema</span><span class="hl-0">: </span><span class="hl-10">Schema</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Schema</span><span class="hl-0">&lt;</span><span class="hl-10">ProviderInterface</span><span class="hl-0">&gt;({</span><br/><span class="hl-0">  </span><span class="hl-1">cif:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">unique:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El CIF del proveedor no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> !== </span><span class="hl-4">9</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El CIF del proveedor debe tener 9 caracteres.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-11">\d</span><span class="hl-13">{8}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">.</span><span class="hl-5">test</span><span class="hl-0">(</span><span class="hl-1">value</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El CIF del proveedor debe tener un formato válido: [1 letra mayúscula][8 dígitos].&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">nombre:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del proveedor no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del proveedor debe comenzar con mayúscula.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">correo:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del proveedor no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9._%+-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-11">@</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9.-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-15">\.</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z</span><span class="hl-14">]</span><span class="hl-13">{2,}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del proveedor debe tener un formato válido.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">direccion:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;La dirección del proveedor no puede ser vacía.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p>En el especificamos las validaciones:</p>
<ul>
<li>El <code>type</code> será <code>String</code></li>
<li>Usamos <code>validate</code> para comprobar si el esquema esta bien definido o no, en caso de que la propiedad no este puesto en el formato que pusimos, lanzará un un mensaje de error o sino cumple con la longitud correspondiente, etc.<br>Por último exportamos el esquema</li>
</ul>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">Provider</span><span class="hl-0"> = </span><span class="hl-5">model</span><span class="hl-0">&lt;</span><span class="hl-10">ProviderInterface</span><span class="hl-0">&gt;(</span><span class="hl-8">&#39;Provider&#39;</span><span class="hl-0">, </span><span class="hl-1">ProviderSchema</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<a id="md:creación-de-notas-1" class="tsd-anchor"></a><h3><a href="#md:creación-de-notas-1">Creación de notas</a></h3><p>Que se encuentra en nuestro directorio <code>src/providers_models</code></p>
<ol>
<li><p>Crear un nuevo proveedor <code>POST /providers_models</code>:</p>
<ul>
<li>Este manejador recibe una solicitud POST en la ruta /providers_models.</li>
<li>Crea un nuevo proveedor en la base de datos.</li>
<li>Si el proveedor ya existe, devuelve un mensaje de error.</li>
<li>Si se crea correctamente el proveedor, devuelve un mensaje de éxito junto con el proveedor creado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">post</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">duplicatedProvider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findOne</span><span class="hl-0">({ </span><span class="hl-1">cif:</span><span class="hl-0"> </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">.</span><span class="hl-1">cif</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">duplicatedProvider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ya existe un proveedor con ese cif&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">provider</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Provider</span><span class="hl-0">(</span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">provider</span><span class="hl-0">.</span><span class="hl-5">save</span><span class="hl-0">();</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">201</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;El Proveedor se ha creado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">provider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">(</span><span class="hl-1">error</span><span class="hl-0">);</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Buscar un proveedor por CIF <code>GET /providers_models</code>:</p>
<ul>
<li>Este manejador recibe una solicitud GET en la ruta /providers_models.</li>
<li>Busca un proveedor en la base de datos basándose en el CIF proporcionado en la consulta.</li>
<li>Si no se proporciona un CIF válido, devuelve un mensaje de error.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se encuentra el proveedor, devuelve un mensaje de éxito junto con el proveedor encontrado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">get</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">cif</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">cif</span><span class="hl-0">;</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">cif</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un CIF&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">proveedorEncontrado</span><span class="hl-0">: </span><span class="hl-10">ProviderInterface</span><span class="hl-0"> | </span><span class="hl-10">null</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findOne</span><span class="hl-0">({ </span><span class="hl-1">cif:</span><span class="hl-0"> </span><span class="hl-1">cif</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">proveedorEncontrado</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;El proveedor no fue encontrado en la base de datos&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;El proveedor fue encontrado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">proveedorEncontrado</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al buscar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Buscar un proveedor por su identificador único <code>GET /providers_models/:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud GET en la ruta /providers_models/:id, donde :id es el identificador único del proveedor.</li>
<li>Busca un proveedor en la base de datos basándose en su identificador único.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se encuentra el proveedor, devuelve un mensaje de éxito junto con el proveedor encontrado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">get</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">provider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findById</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">provider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor encontrado por id con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">provider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al buscar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Actualizar un proveedor por su identificador único <code>PATCH /providers_models/:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud PATCH en la ruta /providers_models/:id, donde :id es el identificador único del proveedor que se desea actualizar.</li>
<li>Actualiza el proveedor en la base de datos basándose en su identificador único.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se actualiza correctamente el proveedor, devuelve un mensaje de éxito junto con el proveedor actualizado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">updatedProvider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findByIdAndUpdate</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">updatedProvider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Se ha actualizado correctamente el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">updatedProvider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al actualizar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Actualizar un proveedor por CIF <code>PATCH /providers_models</code>:</p>
<ul>
<li>Este manejador recibe una solicitud PATCH en la ruta /providers_models.</li>
<li>Actualiza un proveedor en la base de datos basándose en el CIF proporcionado en la consulta.</li>
<li>Si no se proporciona un CIF válido, devuelve un mensaje de error.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se actualiza correctamente el proveedor, devuelve un mensaje de éxito junto con el proveedor actualizado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">cif</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">cif</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">cif</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un CIF&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">updatedProvider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findOneAndUpdate</span><span class="hl-0">({ </span><span class="hl-1">cif:</span><span class="hl-0"> </span><span class="hl-1">cif</span><span class="hl-0"> }, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">updatedProvider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Se ha actualizado correctamente el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">updatedProvider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al actualizar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Eliminar un proveedor por CIF <code>DELETE /providers_models</code>:</p>
<ul>
<li>Este manejador recibe una solicitud DELETE en la ruta /providers_models.</li>
<li>Elimina un proveedor de la base de datos basándose en el CIF proporcionado en la consulta.</li>
<li>Si no se proporciona un CIF válido, devuelve un mensaje de error.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se elimina correctamente el proveedor, devuelve un mensaje de éxito junto con el proveedor eliminado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">delete</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">cif</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">cif</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">cif</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un CIF&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">deletedProvider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findOneAndDelete</span><span class="hl-0">({ </span><span class="hl-1">cif:</span><span class="hl-0"> </span><span class="hl-1">cif</span><span class="hl-0"> });</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">deletedProvider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">`Proveedor </span><span class="hl-9">${</span><span class="hl-1">deletedProvider</span><span class="hl-16">.</span><span class="hl-1">nombre</span><span class="hl-9">}</span><span class="hl-8"> eliminado con éxito`</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">deletedProvider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al eliminar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
<li><p>Eliminar un proveedor por su identificador único <code>DELETE /providers_models/:id</code>:</p>
<ul>
<li>Este manejador recibe una solicitud DELETE en la ruta /providers_models/:id, donde :id es el identificador único del proveedor que se desea eliminar.</li>
<li>Elimina un proveedor de la base de datos basándose en su identificador único.</li>
<li>Si el proveedor no se encuentra en la base de datos, devuelve un mensaje de proveedor no encontrado.</li>
<li>Si se elimina correctamente el proveedor, devuelve un mensaje de éxito junto con el proveedor eliminado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">providerRouter</span><span class="hl-0">.</span><span class="hl-5">delete</span><span class="hl-0">(</span><span class="hl-8">&#39;/providers/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">deletedProvider</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Provider</span><span class="hl-0">.</span><span class="hl-5">findByIdAndDelete</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">    </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">deletedProvider</span><span class="hl-0">) {</span><br/><span class="hl-0">      </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">    }</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Proveedor eliminado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">provider:</span><span class="hl-0"> </span><span class="hl-1">deletedProvider</span><span class="hl-0"> });</span><br/><span class="hl-0">  } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">    </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al eliminar el proveedor&#39;</span><span class="hl-0">, </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0">  }</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
</li>
</ol>
<a id="md:muebles" class="tsd-anchor"></a><h2><a href="#md:muebles">Muebles</a></h2><p>Primer definimos el esquema de los clientes, que lo guardamos en nuestro directorio <code>furnitures_models</code>.</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">enum</span><span class="hl-0"> </span><span class="hl-10">TipoMueble</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-6">Silla</span><span class="hl-0"> = </span><span class="hl-8">&#39;Silla&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Mesa</span><span class="hl-0"> = </span><span class="hl-8">&#39;Mesa&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Cama</span><span class="hl-0"> = </span><span class="hl-8">&#39;Cama&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Armario</span><span class="hl-0"> = </span><span class="hl-8">&#39;Armario&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Sofa</span><span class="hl-0"> = </span><span class="hl-8">&#39;Sofa&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Estanteria</span><span class="hl-0"> = </span><span class="hl-8">&#39;Estanteria&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">enum</span><span class="hl-0"> </span><span class="hl-10">MaterialMueble</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-6">Madera</span><span class="hl-0"> = </span><span class="hl-8">&#39;Madera&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Metal</span><span class="hl-0"> = </span><span class="hl-8">&#39;Metal&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Plastico</span><span class="hl-0"> = </span><span class="hl-8">&#39;Plastico&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">enum</span><span class="hl-0"> </span><span class="hl-10">ColorMueble</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-6">Blanco</span><span class="hl-0"> = </span><span class="hl-8">&#39;Blanco&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Negro</span><span class="hl-0"> = </span><span class="hl-8">&#39;Negro&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Amarillo</span><span class="hl-0"> = </span><span class="hl-8">&#39;Amarillo&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Rojo</span><span class="hl-0"> = </span><span class="hl-8">&#39;Rojo&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Azul</span><span class="hl-0"> = </span><span class="hl-8">&#39;Azul&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Verde</span><span class="hl-0"> = </span><span class="hl-8">&#39;Verde&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">  </span><span class="hl-6">Naranja</span><span class="hl-0"> = </span><span class="hl-8">&#39;Naranja&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">}</span><br/><br/><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">interface</span><span class="hl-0"> </span><span class="hl-10">MuebleInterface</span><span class="hl-0"> </span><span class="hl-9">extends</span><span class="hl-0"> </span><span class="hl-10">Document</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">nombre</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">tipo</span><span class="hl-0">: </span><span class="hl-10">TipoMueble</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">material</span><span class="hl-0">: </span><span class="hl-10">MaterialMueble</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">descripcion</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">color</span><span class="hl-0">: </span><span class="hl-10">ColorMueble</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">precio</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">cantidad</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
<p>Creamos una interfaz que hereda de <code>Document</code>, así definimos la forma de una <strong>nota</strong>(es la colección que se le pasa a MongoDB), en el nuestro cliente tendrá esos atributos.</p>
<p>Ahora definimos las propiedades que tendrá nuestro esquema:</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">MuebleSchema</span><span class="hl-0">: </span><span class="hl-10">Schema</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Schema</span><span class="hl-0">&lt;</span><span class="hl-10">MuebleInterface</span><span class="hl-0">&gt;({</span><br/><span class="hl-0">  </span><span class="hl-1">nombre:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;El nombre del mueble es requerido&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-1">validate:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-5">validator</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> &gt; </span><span class="hl-4">0</span><span class="hl-0">;</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;El nombre del mueble no puede ser vacío&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">tipo:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">enum:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-1">values:</span><span class="hl-0"> </span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">TipoMueble</span><span class="hl-0">),</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese tipo de mueble no está disponible en la tienda&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;El tipo del mueble es requerido&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">material:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">enum:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-1">values:</span><span class="hl-0"> </span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">MaterialMueble</span><span class="hl-0">),</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese material no está disponible en la tienda&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;El material del mueble es requerido&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">descripcion:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;La descripción del mueble es requerida&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-1">validate:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-5">validator</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> &gt; </span><span class="hl-4">0</span><span class="hl-0">;</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;La descripción del mueble no puede ser vacía&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">cantidad:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">Number</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;La cantidad del mueble es requerida&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-1">validate:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-5">validator</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">value</span><span class="hl-0"> &gt; </span><span class="hl-4">0</span><span class="hl-0">;</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;La cantidad del mueble debe ser mayor que 0&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">color:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">enum:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-1">values:</span><span class="hl-0"> </span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">ColorMueble</span><span class="hl-0">),</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese color no está disponible en la tienda&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;El color del mueble es requerido&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">precio:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">Number</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> [</span><span class="hl-9">true</span><span class="hl-0">, </span><span class="hl-8">&#39;El precio del mueble es requerido&#39;</span><span class="hl-0">],</span><br/><span class="hl-0">    </span><span class="hl-1">validate:</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-5">validator</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">number</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">        </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">value</span><span class="hl-0"> &gt; </span><span class="hl-4">0</span><span class="hl-0">;</span><br/><span class="hl-0">      },</span><br/><span class="hl-0">      </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;El precio del mueble debe ser mayor que 0&#39;</span><span class="hl-0">,</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p>En el especificamos las validaciones:</p>
<ul>
<li>El <code>type</code> será <code>String</code></li>
<li>Usamos <code>validate</code> para comprobar si el esquema esta bien definido o no, en caso de que la propiedad no este puesto en el formato que pusimos, lanzará un un mensaje de error o sino cumple con la longitud correspondiente, etc.<br>Por último exportamos el esquema</li>
</ul>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">Mueble</span><span class="hl-0"> = </span><span class="hl-5">model</span><span class="hl-0">&lt;</span><span class="hl-10">MuebleInterface</span><span class="hl-0">&gt;(</span><span class="hl-8">&#39;Mueble&#39;</span><span class="hl-0">, </span><span class="hl-1">MuebleSchema</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<a id="md:creación-de-notas-2" class="tsd-anchor"></a><h3><a href="#md:creación-de-notas-2">Creación de notas</a></h3><p>Que se encuentra en nuestro directorio <code>src/furnitures_models</code></p>
<a id="md:muebles-1" class="tsd-anchor"></a><h2><a href="#md:muebles-1">Muebles</a></h2><a id="md:1-crear-un-nuevo-mueble-post-muebles" class="tsd-anchor"></a><h3><a href="#md:1-crear-un-nuevo-mueble-post-muebles">1. Crear un nuevo mueble <code>POST /muebles</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud POST en la ruta <code>/muebles</code>.</li>
<li>Verifica si el color, tipo y material del mueble son válidos.</li>
<li>Si alguno de los atributos del mueble no es válido, devuelve un mensaje de error.</li>
<li>Crea un nuevo mueble en la base de datos.</li>
<li>Si se crea correctamente el mueble, devuelve un mensaje de éxito junto con el mueble creado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-0"> </span><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">post</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> { </span><span class="hl-6">color</span><span class="hl-0">, </span><span class="hl-6">tipo</span><span class="hl-0">, </span><span class="hl-6">material</span><span class="hl-0"> } = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">;</span><br/><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">ColorMueble</span><span class="hl-0">).</span><span class="hl-5">includes</span><span class="hl-0">(</span><span class="hl-1">color</span><span class="hl-0">)) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese color no está disponible en la tienda&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">TipoMueble</span><span class="hl-0">).</span><span class="hl-5">includes</span><span class="hl-0">(</span><span class="hl-1">tipo</span><span class="hl-0">)) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese tipo de mueble no está disponible en la tienda&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">Object</span><span class="hl-0">.</span><span class="hl-5">values</span><span class="hl-0">(</span><span class="hl-1">MaterialMueble</span><span class="hl-0">).</span><span class="hl-5">includes</span><span class="hl-0">(</span><span class="hl-1">material</span><span class="hl-0">)) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Ese material no está disponible en la tienda&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">mueble</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Mueble</span><span class="hl-0">(</span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">);</span><br/><span class="hl-0">   </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">mueble</span><span class="hl-0">.</span><span class="hl-5">save</span><span class="hl-0">();</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">201</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble creado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">mueble</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al crear el mueble&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:2-buscar-muebles-por-atributos-get-muebles" class="tsd-anchor"></a><h3><a href="#md:2-buscar-muebles-por-atributos-get-muebles">2. Buscar muebles por atributos <code>GET /muebles</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud GET en la ruta <code>/muebles</code>.</li>
<li>Busca muebles en la base de datos basándose en los atributos proporcionados en la consulta.</li>
<li>Si no se encuentran muebles con los criterios de búsqueda proporcionados, devuelve un mensaje de error.</li>
<li>Si se encuentran muebles, devuelve un mensaje de éxito junto con los muebles encontrados.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">get</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">muebles</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">find</span><span class="hl-0">(</span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">);</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">muebles</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se encontraron muebles con los criterios de búsqueda proporcionados&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;Búsqueda realizada con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">muebles</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al realizar la búsqueda&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:3-buscar-un-mueble-por-su-identificador-único-get-mueblesid" class="tsd-anchor"></a><h3><a href="#md:3-buscar-un-mueble-por-su-identificador-único-get-mueblesid">3. Buscar un mueble por su identificador único <code>GET /muebles/:id</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud GET en la ruta <code>/muebles/:id</code>, donde <code>:id</code> es el identificador único del mueble.</li>
<li>Busca un mueble en la base de datos basándose en su identificador único.</li>
<li>Si el mueble no se encuentra en la base de datos, devuelve un mensaje de mueble no encontrado.</li>
<li>Si se encuentra el mueble, devuelve un mensaje de éxito junto con el mueble encontrado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">get</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">muebles</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">findById</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">muebles</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;mueble no encontrado&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble encontrado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">muebles:</span><span class="hl-0"> </span><span class="hl-1">muebles</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al buscar el mueble&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:4-modificar-un-mueble-por-nombre-patch-muebles" class="tsd-anchor"></a><h3><a href="#md:4-modificar-un-mueble-por-nombre-patch-muebles">4. Modificar un mueble por nombre <code>PATCH /muebles</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud PATCH en la ruta <code>/muebles</code>.</li>
<li>Modifica un mueble en la base de datos basándose en el nombre proporcionado en la consulta.</li>
<li>Si no se proporciona un nombre válido, devuelve un mensaje de error.</li>
<li>Si el mueble no se encuentra en la base de datos, devuelve un mensaje de mueble no encontrado.</li>
<li>Si se modifica correctamente el mueble, devuelve un mensaje de éxito junto con el mueble modificado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">nombre</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">nombre</span><span class="hl-0">;</span><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">nombre</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un nombre&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">muebleActualizado</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">findOneAndUpdate</span><span class="hl-0">({ </span><span class="hl-1">nombre:</span><span class="hl-0"> </span><span class="hl-1">nombre</span><span class="hl-0"> }, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">muebleActualizado</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble no encontrado para modificar&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble modificado con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">mueble:</span><span class="hl-0"> </span><span class="hl-1">muebleActualizado</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al modificar el mueble&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:5-modificar-un-mueble-por-su-identificador-único-patch-mueblesid" class="tsd-anchor"></a><h3><a href="#md:5-modificar-un-mueble-por-su-identificador-único-patch-mueblesid">5. Modificar un mueble por su identificador único <code>PATCH /muebles/:id</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud PATCH en la ruta <code>/muebles/:id</code>, donde <code>:id</code> es el identificador único del mueble que se desea modificar.</li>
<li>Modifica un mueble en la base de datos basándose en su identificador único.</li>
<li>Si el mueble no se encuentra en la base de datos, devuelve un mensaje de mueble no encontrado.</li>
<li>Si se modifica correctamente el mueble, devuelve un mensaje de éxito junto con el mueble modificado.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">patch</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">mueble</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">findByIdAndUpdate</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">, </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">body</span><span class="hl-0">, { </span><span class="hl-1">new:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0"> });</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">mueble</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble no encontrado para modificar&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble modificado por id con éxito&#39;</span><span class="hl-0">, </span><span class="hl-1">mueble:</span><span class="hl-0"> </span><span class="hl-1">mueble</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al modificar el mueble&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:6-eliminar-un-mueble-por-nombre-delete-muebles" class="tsd-anchor"></a><h3><a href="#md:6-eliminar-un-mueble-por-nombre-delete-muebles">6. Eliminar un mueble por nombre <code>DELETE /muebles</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud DELETE en la ruta <code>/muebles</code>.</li>
<li>Elimina un mueble de la base de datos basándose en el nombre proporcionado en la consulta.</li>
<li>Si no se proporciona un nombre válido, devuelve un mensaje de error.</li>
<li>Si el mueble no se encuentra en la base de datos, devuelve un mensaje de mueble no encontrado.</li>
<li>Si se elimina correctamente el mueble, devuelve un mensaje de éxito.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">delete</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">nombre</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">query</span><span class="hl-0">.</span><span class="hl-1">nombre</span><span class="hl-0">;</span><br/><span class="hl-0"> </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">nombre</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">400</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">message:</span><span class="hl-0"> </span><span class="hl-8">&#39;No se proporcionó un nombre&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">muebleEliminado</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">findOneAndDelete</span><span class="hl-0">({ </span><span class="hl-1">nombre:</span><span class="hl-0"> </span><span class="hl-1">nombre</span><span class="hl-0"> });</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">muebleEliminado</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble no encontrado para eliminar&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble eliminado con éxito&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al eliminar el mueble&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:7-eliminar-un-mueble-por-su-identificador-único-delete-mueblesid" class="tsd-anchor"></a><h3><a href="#md:7-eliminar-un-mueble-por-su-identificador-único-delete-mueblesid">7. Eliminar un mueble por su identificador único <code>DELETE /muebles/:id</code>:</a></h3><ul>
<li>Este manejador recibe una solicitud DELETE en la ruta <code>/muebles/:id</code>, donde <code>:id</code> es el identificador único del mueble que se desea eliminar.</li>
<li>Elimina un mueble de la base de datos basándose en su identificador único.</li>
<li>Si el mueble no se encuentra en la base de datos, devuelve un mensaje de mueble no encontrado.</li>
<li>Si se elimina correctamente el mueble, devuelve un mensaje de éxito.</li>
</ul>
<pre><code class="language-ts"><span class="hl-1">furnitureRouter</span><span class="hl-0">.</span><span class="hl-5">delete</span><span class="hl-0">(</span><span class="hl-8">&#39;/muebles/:id&#39;</span><span class="hl-0">, </span><span class="hl-9">async</span><span class="hl-0"> (</span><span class="hl-1">req</span><span class="hl-0">, </span><span class="hl-1">res</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">id</span><span class="hl-0"> = </span><span class="hl-1">req</span><span class="hl-0">.</span><span class="hl-1">params</span><span class="hl-0">.</span><span class="hl-1">id</span><span class="hl-0">;</span><br/><span class="hl-0"> </span><span class="hl-7">try</span><span class="hl-0"> {</span><br/><span class="hl-0">   </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">muebleEliminado</span><span class="hl-0"> = </span><span class="hl-7">await</span><span class="hl-0"> </span><span class="hl-1">Mueble</span><span class="hl-0">.</span><span class="hl-5">findByIdAndDelete</span><span class="hl-0">(</span><span class="hl-1">id</span><span class="hl-0">);</span><br/><span class="hl-0">   </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">muebleEliminado</span><span class="hl-0">) {</span><br/><span class="hl-0">     </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">404</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble no encontrado para eliminar&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0">   }</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">200</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Mueble eliminado por id con éxito&#39;</span><span class="hl-0"> });</span><br/><span class="hl-0"> } </span><span class="hl-7">catch</span><span class="hl-0"> (</span><span class="hl-1">error</span><span class="hl-0">) {</span><br/><span class="hl-0">   </span><span class="hl-7">return</span><span class="hl-0"> </span><span class="hl-1">res</span><span class="hl-0">.</span><span class="hl-5">status</span><span class="hl-0">(</span><span class="hl-4">500</span><span class="hl-0">).</span><span class="hl-5">send</span><span class="hl-0">({ </span><span class="hl-1">msg:</span><span class="hl-0"> </span><span class="hl-8">&#39;Error al eliminar el mueble&#39;</span><span class="hl-0">, </span><span class="hl-1">error:</span><span class="hl-0"> </span><span class="hl-1">error</span><span class="hl-0"> });</span><br/><span class="hl-0"> }</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<a id="md:transacciones" class="tsd-anchor"></a><h2><a href="#md:transacciones">Transacciones</a></h2><p>+++++++++++++++++++++++++++++</p>
<a id="md:server" class="tsd-anchor"></a><h2><a href="#md:server">Server</a></h2><p>Aqui se hace la configuración del servidor, usando Express.js para el API REST
Se importa primero el módulo <code>express</code> para crear el servidor y el archivo <code>mongoose.js</code> para configurar la conexión a la base de datos MongoDB.
Con esto se puede iniciar el servidor y hacerlo escuchar en el puerto que definimos y muestra un mensaje de que esta siendo escuchado.</p>
<pre><code class="language-ts"><span class="hl-3">// server.ts</span><br/><span class="hl-7">import</span><span class="hl-0"> </span><span class="hl-1">express</span><span class="hl-0"> </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;express&#39;</span><span class="hl-0">;</span><br/><span class="hl-7">import</span><span class="hl-0"> </span><span class="hl-8">&#39;./db/mongoose.js&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">customerRouter</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;./routers/customers_routers.js&#39;</span><span class="hl-0">;</span><br/><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">providerRouter</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;./routers/provider_routers.js&#39;</span><span class="hl-0">;</span><br/><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">furnitureRouter</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;./routers/furnitures_routers.js&#39;</span><span class="hl-0">;</span><br/><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">defaultRouter</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;./routers/default.js&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">app</span><span class="hl-0"> = </span><span class="hl-5">express</span><span class="hl-0">();</span><br/><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">port</span><span class="hl-0"> = </span><span class="hl-1">process</span><span class="hl-0">.</span><span class="hl-1">env</span><span class="hl-0">.</span><span class="hl-6">PORT</span><span class="hl-0"> || </span><span class="hl-4">3000</span><span class="hl-0">;</span><br/><br/><span class="hl-3">// Rutas</span><br/><br/><span class="hl-1">app</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">providerRouter</span><span class="hl-0">);</span><br/><span class="hl-1">app</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">customerRouter</span><span class="hl-0">);</span><br/><span class="hl-1">app</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">furnitureRouter</span><span class="hl-0">);</span><br/><br/><span class="hl-1">app</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">defaultRouter</span><span class="hl-0">);</span><br/><br/><span class="hl-1">app</span><span class="hl-0">.</span><span class="hl-5">listen</span><span class="hl-0">(</span><span class="hl-1">port</span><span class="hl-0">, () </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-8">`Server is up on port </span><span class="hl-9">${</span><span class="hl-1">port</span><span class="hl-9">}</span><span class="hl-8">`</span><span class="hl-0">);</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<a id="md:dificultades" class="tsd-anchor"></a><h3><a href="#md:dificultades">Dificultades</a></h3><a id="md:bibliografía" class="tsd-anchor"></a><h3><a href="#md:bibliografía">Bibliografía</a></h3><ul>
<li><a href="https://campusingenieriaytecnologia2324.ull.es/mod/url/view.php?id=17339">Apuntes Asignatura</a></li>
<li><a href="https://www.mongodb.com/">MongoDB</a></li>
<li><a href="https://render.com/">Render</a></li>
<li><a href="https://nodejs.org/en/">Node.js</a></li>
<li><a href="https://www.mongodb.com/products/platform/atlas-database">MongoDB/MongoDB Atlas</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress"><span>Práctica 13 -<wbr/> DSIkea: API REST con <wbr/>Node/<wbr/>Express</span></a><a href="#md:informe"><span>Informe</span></a><ul><li><ul><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:objetivos-a-lograr-realizando-esta-práctica"><span>Objetivos a lograr realizando esta práctica</span></a></li><li><a href="#md:ejercicios-y-su-explicación"><span>Ejercicios y su explicación</span></a></li><li><a href="#md:descripción-de-los-requisitos-del-api"><span>Descripción de los requisitos del API</span></a></li></ul></li><li><a href="#md:servidor"><span>Servidor</span></a></li><li><a href="#md:clientes"><span>Clientes</span></a></li><li><ul><li><a href="#md:creación-de-notas"><span>Creación de notas</span></a></li><li><a href="#md:creación-de-notas-1"><span>Creación de notas</span></a></li></ul></li><li><a href="#md:muebles"><span>Muebles</span></a></li><li><ul><li><a href="#md:creación-de-notas-2"><span>Creación de notas</span></a></li></ul></li><li><a href="#md:muebles-1"><span>Muebles</span></a></li><li><ul><li><a href="#md:1-crear-un-nuevo-mueble-post-muebles"><span>1. <wbr/>Crear un nuevo mueble POST /muebles:</span></a></li><li><a href="#md:2-buscar-muebles-por-atributos-get-muebles"><span>2. <wbr/>Buscar muebles por atributos GET /muebles:</span></a></li><li><a href="#md:3-buscar-un-mueble-por-su-identificador-único-get-mueblesid"><span>3. <wbr/>Buscar un mueble por su identificador único GET /muebles/:id:</span></a></li><li><a href="#md:4-modificar-un-mueble-por-nombre-patch-muebles"><span>4. <wbr/>Modificar un mueble por nombre PATCH /muebles:</span></a></li><li><a href="#md:5-modificar-un-mueble-por-su-identificador-único-patch-mueblesid"><span>5. <wbr/>Modificar un mueble por su identificador único PATCH /muebles/:id:</span></a></li><li><a href="#md:6-eliminar-un-mueble-por-nombre-delete-muebles"><span>6. <wbr/>Eliminar un mueble por nombre DELETE /muebles:</span></a></li><li><a href="#md:7-eliminar-un-mueble-por-su-identificador-único-delete-mueblesid"><span>7. <wbr/>Eliminar un mueble por su identificador único DELETE /muebles/:id:</span></a></li></ul></li><li><a href="#md:transacciones"><span>Transacciones</span></a></li><li><a href="#md:server"><span>Server</span></a></li><li><ul><li><a href="#md:dificultades"><span>Dificultades</span></a></li><li><a href="#md:bibliografía"><span>Bibliografía</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>