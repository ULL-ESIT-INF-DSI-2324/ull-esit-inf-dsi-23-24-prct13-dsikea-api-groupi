<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</title><meta name="description" content="Documentation for ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</h2></div><div class="tsd-panel tsd-typography"><a id="md:práctica-13---dsikea-api-rest-con-nodeexpress" class="tsd-anchor"></a><h1><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress">Práctica 13 - DSIkea: API REST con Node/Express</a></h1><p>Alumnas:  </p>
<ul>
<li>Inés Garrote Fontenla <a href="mailto:alu0101512297@ull.edu.es">alu0101512297@ull.edu.es</a>  </li>
<li>Godgith John <a href="mailto:alu0101463858@ull.edu.es">alu0101463858@ull.edu.es</a>  </li>
<li>Ángela Zhouling Izquierdo Padrón <a href="mailto:alu0101480442@ull.edu.es">alu0101480442@ull.edu.es</a></li>
</ul>
<p><a href="https://sonarcloud.io/summary/new_code?id=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2324_ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi&metric=alert_status" alt="Quality Gate Status"></a></p>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2324/ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi/badge.svg?branch=main" alt="Coverage Status"></a></p>
<a id="md:informe" class="tsd-anchor"></a><h1><a href="#md:informe">Informe</a></h1><a id="md:introducción" class="tsd-anchor"></a><h3><a href="#md:introducción">Introducción</a></h3><p>En esta práctica grupal hay que aplicar todo lo aprendido relacionado con typescript y el entorno de ejecución <code>Node.js</code>.</p>
<a id="md:objetivos-a-lograr-realizando-esta-práctica" class="tsd-anchor"></a><h3><a href="#md:objetivos-a-lograr-realizando-esta-práctica">Objetivos a lograr realizando esta práctica</a></h3><p>Aprender acerca de la base de datos de basado en colecciones, en el que se usará <code>Mongoose</code>, que és una biblioteca de moedelado de objetos de <code>MongoDB</code> para <code>Node.js</code>. En el que se usa <strong>Esquemas</strong>(Mecanismo que da forma a un documento) y <strong>Modelos</strong>(Permite instanciar objetos de los esquemas)
Para interactuar con la base de datos, se usará las operaciones <strong>CRUD</strong>(Creat-Read-Update-Delete).   </p>
<p>Primero se debe descargar el <strong>MongoDB</strong>:</p>
<ul>
<li>Primero se descarga la versión <a href="https://www.mongodb.com/try/download/community">Community Server</a>(que es un archico <code>tgz</code>)</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$wget</span><span class="hl-0"> </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-7.0.8.tgz</span><br/><span class="hl-0">--</span><span class="hl-4">2024</span><span class="hl-0">-</span><span class="hl-4">04</span><span class="hl-0">-</span><span class="hl-4">09</span><span class="hl-0"> </span><span class="hl-4">09</span><span class="hl-0">:</span><span class="hl-4">55</span><span class="hl-0">:</span><span class="hl-4">26</span><span class="hl-0">--  </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-ubuntu2204-7.0.8.tgz</span><br/><span class="hl-1">Resolving</span><span class="hl-0"> </span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">org</span><span class="hl-0"> (</span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">org</span><span class="hl-0">)... </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.58</span><span class="hl-0">, </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.54</span><span class="hl-0">, </span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.61</span><span class="hl-0">, ...</span><br/><span class="hl-1">Connecting</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">org</span><span class="hl-0"> (</span><span class="hl-1">fastdl</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">org</span><span class="hl-0">)|</span><span class="hl-4">13.224</span><span class="hl-0">.</span><span class="hl-4">115.58</span><span class="hl-0">|:</span><span class="hl-4">443.</span><span class="hl-0">.. </span><span class="hl-1">connected</span><span class="hl-0">.</span><br/><span class="hl-6">HTTP</span><span class="hl-0"> </span><span class="hl-1">request</span><span class="hl-0"> </span><span class="hl-1">sent</span><span class="hl-0">, </span><span class="hl-1">awaiting</span><span class="hl-0"> </span><span class="hl-1">response</span><span class="hl-0">... </span><span class="hl-4">200</span><span class="hl-0"> </span><span class="hl-6">OK</span><br/><span class="hl-2">Length</span><span class="hl-0">: </span><span class="hl-4">85283830</span><span class="hl-0"> (81</span><span class="hl-6">M</span><span class="hl-0">) [</span><span class="hl-1">application</span><span class="hl-0">/</span><span class="hl-1">gzip</span><span class="hl-0">]</span><br/><span class="hl-1">Saving</span><span class="hl-0"> </span><span class="hl-2">to</span><span class="hl-0">: ‘</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">linux</span><span class="hl-0">-</span><span class="hl-1">x86_64</span><span class="hl-0">-</span><span class="hl-1">ubuntu2204</span><span class="hl-0">-</span><span class="hl-4">7.0</span><span class="hl-0">.8.</span><span class="hl-1">tgz</span><span class="hl-0">’</span>
</code><button>Copy</button></pre>
<ul>
<li>Ahora se descomprime</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$tar</span><span class="hl-0"> </span><span class="hl-1">xzvf</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">linux</span><span class="hl-0">-</span><span class="hl-1">x86_64</span><span class="hl-0">-</span><span class="hl-1">ubuntu2204</span><span class="hl-0">-</span><span class="hl-4">7.0</span><span class="hl-0">.8.</span><span class="hl-1">tgz</span><span class="hl-0"> </span>
</code><button>Copy</button></pre>
<ul>
<li>Se crea un un nuevo directorio <code>mongodb-data</code>que MongoDB usará para almacenar todo lo necesario al ejecutar el servidor, incluyendo la información que almacenamos en nuestras bases de datos</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$pwd</span><br/><span class="hl-0">/</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><br/><span class="hl-0">[~()]</span><span class="hl-1">$mkdir</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">data</span>
</code><button>Copy</button></pre>
<ul>
<li>Ahora se arranca el servidor</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$sudo</span><span class="hl-0"> /</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><span class="hl-0">/</span><span class="hl-1">mongodb</span><span class="hl-0">/</span><span class="hl-1">bin</span><span class="hl-0">/</span><span class="hl-1">mongod</span><span class="hl-0"> --</span><span class="hl-1">dbpath</span><span class="hl-0"> /</span><span class="hl-1">home</span><span class="hl-0">/</span><span class="hl-1">usuario</span><span class="hl-0">/</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">data</span><span class="hl-0">/</span>
</code><button>Copy</button></pre>
<ul>
<li>Para comprobar que el servidor funciona bien, se puede descargar <a href="https://www.mongodb.com/try/download/shell"> MongoDB Shell</a></li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$wget</span><span class="hl-0"> </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//downloads.mongodb.com/compass/mongodb-mongosh_2.2.3_amd64.deb</span><br/><span class="hl-0">--</span><span class="hl-4">2024</span><span class="hl-0">-</span><span class="hl-4">04</span><span class="hl-0">-</span><span class="hl-4">09</span><span class="hl-0"> </span><span class="hl-4">09</span><span class="hl-0">:</span><span class="hl-4">58</span><span class="hl-0">:</span><span class="hl-4">43</span><span class="hl-0">--  </span><span class="hl-2">https</span><span class="hl-0">:</span><span class="hl-3">//downloads.mongodb.com/compass/mongodb-mongosh_2.2.3_amd64.deb</span><br/><span class="hl-1">Resolving</span><span class="hl-0"> </span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">com</span><span class="hl-0"> (</span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">com</span><span class="hl-0">)... </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.70</span><span class="hl-0">, </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.11</span><span class="hl-0">, </span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.46</span><span class="hl-0">, ...</span><br/><span class="hl-1">Connecting</span><span class="hl-0"> </span><span class="hl-1">to</span><span class="hl-0"> </span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-5">com</span><span class="hl-0"> (</span><span class="hl-1">downloads</span><span class="hl-0">.</span><span class="hl-1">mongodb</span><span class="hl-0">.</span><span class="hl-1">com</span><span class="hl-0">)|</span><span class="hl-4">3.160</span><span class="hl-0">.</span><span class="hl-4">231.70</span><span class="hl-0">|:</span><span class="hl-4">443.</span><span class="hl-0">.. </span><span class="hl-1">connected</span><span class="hl-0">.</span><br/><span class="hl-6">HTTP</span><span class="hl-0"> </span><span class="hl-1">request</span><span class="hl-0"> </span><span class="hl-1">sent</span><span class="hl-0">, </span><span class="hl-1">awaiting</span><span class="hl-0"> </span><span class="hl-1">response</span><span class="hl-0">... </span><span class="hl-4">200</span><span class="hl-0"> </span><span class="hl-6">OK</span><br/><span class="hl-2">Length</span><span class="hl-0">: </span><span class="hl-4">52976792</span><span class="hl-0"> (51</span><span class="hl-6">M</span><span class="hl-0">) [</span><span class="hl-1">application</span><span class="hl-0">/</span><span class="hl-1">octet</span><span class="hl-0">-</span><span class="hl-1">stream</span><span class="hl-0">]</span><br/><span class="hl-1">Saving</span><span class="hl-0"> </span><span class="hl-2">to</span><span class="hl-0">: ‘</span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><span class="hl-0">’</span>
</code><button>Copy</button></pre>
<ul>
<li>Mientras se ejecuta esto en una terminal, abrimos otra terminal y lo descargamos</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$sudo</span><span class="hl-0"> </span><span class="hl-1">dpkg</span><span class="hl-0"> -</span><span class="hl-1">i</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><span class="hl-0"> </span><br/><span class="hl-0">[</span><span class="hl-1">sudo</span><span class="hl-0">] </span><span class="hl-1">password</span><span class="hl-0"> </span><span class="hl-1">for</span><span class="hl-0"> </span><span class="hl-2">usuario</span><span class="hl-0">: </span><br/><span class="hl-1">Seleccionando</span><span class="hl-0"> </span><span class="hl-1">el</span><span class="hl-0"> </span><span class="hl-1">paquete</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh</span><span class="hl-0"> </span><span class="hl-1">previamente</span><span class="hl-0"> </span><span class="hl-1">no</span><span class="hl-0"> </span><span class="hl-1">seleccionado</span><span class="hl-0">.</span><br/><span class="hl-0">(</span><span class="hl-1">Leyendo</span><span class="hl-0"> </span><span class="hl-1">la</span><span class="hl-0"> </span><span class="hl-1">base</span><span class="hl-0"> </span><span class="hl-1">de</span><span class="hl-0"> </span><span class="hl-1">datos</span><span class="hl-0"> ... </span><span class="hl-4">110121</span><span class="hl-0"> </span><span class="hl-1">ficheros</span><span class="hl-0"> </span><span class="hl-1">o</span><span class="hl-0"> </span><span class="hl-1">directorios</span><span class="hl-0"> </span><span class="hl-1">instalados</span><span class="hl-0"> </span><span class="hl-1">actualmente</span><span class="hl-0">.)</span><br/><span class="hl-1">Preparando</span><span class="hl-0"> </span><span class="hl-1">para</span><span class="hl-0"> </span><span class="hl-1">desempaquetar</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-1">mongosh_2</span><span class="hl-0">.2.3</span><span class="hl-1">_amd64</span><span class="hl-0">.</span><span class="hl-1">deb</span><span class="hl-0"> ...</span><br/><span class="hl-1">Desempaquetando</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-5">mongosh</span><span class="hl-0"> (</span><span class="hl-4">2.2</span><span class="hl-0">.</span><span class="hl-4">3</span><span class="hl-0">) ...</span><br/><span class="hl-1">Configurando</span><span class="hl-0"> </span><span class="hl-1">mongodb</span><span class="hl-0">-</span><span class="hl-5">mongosh</span><span class="hl-0"> (</span><span class="hl-4">2.2</span><span class="hl-0">.</span><span class="hl-4">3</span><span class="hl-0">) ...</span><br/><span class="hl-1">Procesando</span><span class="hl-0"> </span><span class="hl-1">disparadores</span><span class="hl-0"> </span><span class="hl-1">para</span><span class="hl-0"> </span><span class="hl-1">man</span><span class="hl-0">-</span><span class="hl-5">db</span><span class="hl-0"> (</span><span class="hl-4">2.10</span><span class="hl-0">.</span><span class="hl-4">2</span><span class="hl-0">-</span><span class="hl-4">1</span><span class="hl-0">) ...</span>
</code><button>Copy</button></pre>
<ul>
<li>Por último para ejecutar el servidor se usa el comando</li>
</ul>
<pre><code class="language-ts"><span class="hl-0">[~()]</span><span class="hl-1">$mongosh</span><span class="hl-0"> </span>
</code><button>Copy</button></pre>
<a id="md:ejercicios-y-su-explicación" class="tsd-anchor"></a><h3><a href="#md:ejercicios-y-su-explicación">Ejercicios y su explicación</a></h3><p>Hay que implementar un API REST, usando Node/Express, a través de varias operaciones(CRUD) para gestionar una tienda de muebles </p>
<a id="md:descripción-de-los-requisitos-del-api" class="tsd-anchor"></a><h3><a href="#md:descripción-de-los-requisitos-del-api">Descripción de los requisitos del API</a></h3><a id="md:servidor" class="tsd-anchor"></a><h2><a href="#md:servidor">Servidor</a></h2><p>Primero se debe conectar el servidor de la base de datos que se ejecuta en nuestra máquina:</p>
<pre><code class="language-ts"><span class="hl-7">import</span><span class="hl-0"> { </span><span class="hl-1">connect</span><span class="hl-0"> } </span><span class="hl-7">from</span><span class="hl-0"> </span><span class="hl-8">&#39;mongoose&#39;</span><span class="hl-0">;</span><br/><br/><span class="hl-5">connect</span><span class="hl-0">(</span><span class="hl-8">&#39;mongodb://127.0.0.1:27017/dsikea-api-rest&#39;</span><span class="hl-0">)</span><br/><span class="hl-0">  .</span><span class="hl-5">then</span><span class="hl-0">(() </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-8">&#39;Connection to MongoDB server established&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">  })</span><br/><span class="hl-0">  .</span><span class="hl-5">catch</span><span class="hl-0">(() </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">console</span><span class="hl-0">.</span><span class="hl-5">log</span><span class="hl-0">(</span><span class="hl-8">&#39;Unable to connect to MongoDB server&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">  });</span>
</code><button>Copy</button></pre>
<p>En el se usa el método <code>connect</code>, que devuelve una promesa. Usamos el parámetro <code>dbURL</code>, en donde se pone la conexión al servidor <code>MongoDB</code>. Si la conexión se establece bien, pues muestra un mensaje de <code>&#39;Connection to MongoDB server established&#39;</code> y sino pues un mensaje <code>&#39;Unable to connect to MongoDB server&#39;</code></p>
<a id="md:clientes" class="tsd-anchor"></a><h2><a href="#md:clientes">Clientes</a></h2><p>Primer definimos el esquema de los clientes, que lo guardamos en nuetro directorio <code>models</code>.</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">interface</span><span class="hl-0"> </span><span class="hl-10">ClienteInterface</span><span class="hl-0"> </span><span class="hl-9">extends</span><span class="hl-0"> </span><span class="hl-10">Document</span><span class="hl-0"> {</span><br/><span class="hl-0">  </span><span class="hl-1">dni</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">nombre</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">correo</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">  </span><span class="hl-1">contacto</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">;</span><br/><span class="hl-0">}</span>
</code><button>Copy</button></pre>
<p>Creamos una interfaz que hereda de <code>Document</code>, así definimos la forma de una <strong>nota</strong>(es la colección que se le pasa a MongoDB), en el nuestro cliente tendrá esos atributos.</p>
<p>Ahora definimos las propiedades que tendrá nuestro esquema:</p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">ClienteSchema</span><span class="hl-0">: </span><span class="hl-10">Schema</span><span class="hl-0"> = </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Schema</span><span class="hl-0">&lt;</span><span class="hl-10">ClienteInterface</span><span class="hl-0">&gt;({</span><br/><span class="hl-0">  </span><span class="hl-1">dni:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">unique:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> !== </span><span class="hl-4">9</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente debe tener 9 caracteres.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-11">\d</span><span class="hl-13">{8}</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">.</span><span class="hl-5">test</span><span class="hl-0">(</span><span class="hl-1">value</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El DNI del cliente debe tener un formato válido: [8 dígitos][1 letra mayúscula].&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">nombre:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">A-Z</span><span class="hl-14">]</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El nombre del cliente debe comenzar con mayúscula.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">correo:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9._%+-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-11">@</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z0-9.-</span><span class="hl-14">]</span><span class="hl-13">+</span><span class="hl-15">\.</span><span class="hl-14">[</span><span class="hl-11">a-zA-Z</span><span class="hl-14">]</span><span class="hl-13">{2,}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El correo del cliente debe tener un formato válido.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">  </span><span class="hl-1">contacto:</span><span class="hl-0"> {</span><br/><span class="hl-0">    </span><span class="hl-1">type:</span><span class="hl-0"> </span><span class="hl-1">String</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">required:</span><span class="hl-0"> </span><span class="hl-9">true</span><span class="hl-0">, </span><br/><span class="hl-0">    </span><span class="hl-5">validate</span><span class="hl-1">:</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">: </span><span class="hl-10">string</span><span class="hl-0">) </span><span class="hl-9">=&gt;</span><span class="hl-0"> {</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-1">length</span><span class="hl-0"> === </span><span class="hl-4">0</span><span class="hl-0">) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El número de contacto del cliente no puede ser vacío.&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">      </span><span class="hl-7">if</span><span class="hl-0"> (!</span><span class="hl-1">value</span><span class="hl-0">.</span><span class="hl-5">match</span><span class="hl-0">(</span><span class="hl-11">/</span><span class="hl-12">^</span><span class="hl-11">\d</span><span class="hl-13">{9}</span><span class="hl-12">$</span><span class="hl-11">/</span><span class="hl-0">)) {</span><br/><span class="hl-0">        </span><span class="hl-7">throw</span><span class="hl-0"> </span><span class="hl-9">new</span><span class="hl-0"> </span><span class="hl-5">Error</span><span class="hl-0">(</span><span class="hl-8">&#39;El número de contacto del cliente debe tener un formato válido: [9 dígitos].&#39;</span><span class="hl-0">);</span><br/><span class="hl-0">      }</span><br/><span class="hl-0">    },</span><br/><span class="hl-0">  },</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p>En el especificamos las validaciones:</p>
<ul>
<li>El <code>type</code> será <code>String</code></li>
<li>Usamos <code>validate</code> para comprobar si el esquema esta bien definido o no, en caso de que la propiedad no este puesto en el formato que pusimos, lanzará un un mensaje de error o sino cumple con la longitud correspondiente, etc.<br>Por último exportamos el esquema</li>
</ul>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">Cliente</span><span class="hl-0"> = </span><span class="hl-5">model</span><span class="hl-0">&lt;</span><span class="hl-10">ClienteInterface</span><span class="hl-0">&gt;(</span><span class="hl-8">&#39;Cliente&#39;</span><span class="hl-0">, </span><span class="hl-1">ClienteSchema</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<a id="md:creación-de-notas" class="tsd-anchor"></a><h3><a href="#md:creación-de-notas">Creación de notas</a></h3><p>  Creamos los manejadores que usaremos en la base datos, que lo creamos en otro directorio <code>src/routers</code>
  Primero gestionamos las rutas, que se usará para manejar las solicitudes HTTPconfiguramos el servidor para que, por defecto, </p>
<pre><code class="language-ts"><span class="hl-7">export</span><span class="hl-0"> </span><span class="hl-9">const</span><span class="hl-0"> </span><span class="hl-6">customerRouter</span><span class="hl-0"> = </span><span class="hl-1">express</span><span class="hl-0">.</span><span class="hl-5">Router</span><span class="hl-0">();</span><br/><span class="hl-1">customerRouter</span><span class="hl-0">.</span><span class="hl-5">use</span><span class="hl-0">(</span><span class="hl-1">express</span><span class="hl-0">.</span><span class="hl-5">json</span><span class="hl-0">());</span>
</code><button>Copy</button></pre>
<a id="md:proveedores" class="tsd-anchor"></a><h2><a href="#md:proveedores">Proveedores</a></h2><a id="md:muebles" class="tsd-anchor"></a><h2><a href="#md:muebles">Muebles</a></h2><a id="md:transacciones" class="tsd-anchor"></a><h2><a href="#md:transacciones">Transacciones</a></h2><a id="md:dificultades" class="tsd-anchor"></a><h3><a href="#md:dificultades">Dificultades</a></h3><a id="md:bibliografía" class="tsd-anchor"></a><h3><a href="#md:bibliografía">Bibliografía</a></h3><ul>
<li><a href="https://campusingenieriaytecnologia2324.ull.es/mod/url/view.php?id=17339">Apuntes Asignatura</a></li>
<li><a href="https://www.mongodb.com/">MongoDB</a></li>
<li><a href="https://render.com/">Render</a></li>
<li><a href="https://nodejs.org/en/">Node.js</a></li>
<li><a href="https://www.mongodb.com/products/platform/atlas-database">MongoDB/MongoDB Atlas</a></li>
</ul>
<hr>
<p>Arrancar servidor descargado:
<code>sudo /home/usuario/mongodb/bin/mongod --dbpath /home/usuario/mongodb-data/</code></p>
<p>Ejecutemos servidor;
<code>node dist/server.js</code></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:práctica-13---dsikea-api-rest-con-nodeexpress"><span>Práctica 13 -<wbr/> DSIkea: API REST con <wbr/>Node/<wbr/>Express</span></a><a href="#md:informe"><span>Informe</span></a><ul><li><ul><li><a href="#md:introducción"><span>Introducción</span></a></li><li><a href="#md:objetivos-a-lograr-realizando-esta-práctica"><span>Objetivos a lograr realizando esta práctica</span></a></li><li><a href="#md:ejercicios-y-su-explicación"><span>Ejercicios y su explicación</span></a></li><li><a href="#md:descripción-de-los-requisitos-del-api"><span>Descripción de los requisitos del API</span></a></li></ul></li><li><a href="#md:servidor"><span>Servidor</span></a></li><li><a href="#md:clientes"><span>Clientes</span></a></li><li><ul><li><a href="#md:creación-de-notas"><span>Creación de notas</span></a></li></ul></li><li><a href="#md:proveedores"><span>Proveedores</span></a></li><li><a href="#md:muebles"><span>Muebles</span></a></li><li><a href="#md:transacciones"><span>Transacciones</span></a></li><li><ul><li><a href="#md:dificultades"><span>Dificultades</span></a></li><li><a href="#md:bibliografía"><span>Bibliografía</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="index.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>ull-esit-inf-dsi-23-24-prct13-dsikea-api-groupi</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>